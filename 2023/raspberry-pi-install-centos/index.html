

<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>树莓派4B烧录CentOS镜像并安装宝塔面板 - 景蓝的小屋</title>
     
    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/bootstrap.min.css" />
    
    <link rel="stylesheet" href="/css/global.css" />
    
    <link rel="stylesheet" href="/css/newsroom.css" />
      
    <link rel="stylesheet" href="/css/post.css" />
     
    <link rel="stylesheet" href="/css/links.css" />
        <link rel="apple-touch-icon" sizes="76x76" href="https://unpkg.com/yurik-static@1.0.6/favicon/v2/apple-touch-icon.png"> <link rel="icon" href="https://unpkg.com/yurik-static@1.0.6/favicon/v2/favicon.ico">
  <meta name="generator" content="Hexo 7.0.0"><link rel="alternate" href="/feed.xml" title="景蓝的小屋" type="application/rss+xml">
</head>
  <body>
    <nav
      class="navbar navbar-expand-lg bg-body-tertiary fixed-top navbar-origin"
      style="backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px)"
      id="navbar"
      data-bs-theme="white"
    >
      <div class="container">
        <a class="navbar-brand fw-bold" href="#">景蓝的小屋</a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarCollapse"
          aria-controls="navbarCollapse"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarCollapse">
          <ul class="navbar-nav me-auto mb-2 mb-md-0">
            
            <li class="nav-item">
              <a
                class="nav-link"
                aria-current="page"
                href="/"
                >主页</a
              >
            </li>
            
            <li class="nav-item">
              <a
                class="nav-link"
                aria-current="page"
                href="/about"
                >关于</a
              >
            </li>
            
            <li class="nav-item">
              <a
                class="nav-link"
                aria-current="page"
                href="/links"
                >友情链接</a
              >
            </li>
            
          </ul>
        </div>
      </div>
    </nav>

    <main>
      <div id="content" class="container section-content py-5 mt-5">
        <article id="post" class="post">
  <div id="header">
    <div class="category" style="color: #6e6e73">
      <div class="content">
        <div class="category-eyebrow">
          <span>博文</span> ·
          <span>2023 年 01 月 19 日</span>
        </div>
      </div>
    </div>

    <div class="pagetitle">
      <div class="content">
        <h1 class="hero-headline" style="margin-top: 0.75rem !important">
          树莓派4B烧录CentOS镜像并安装宝塔面板
        </h1>
      </div>
    </div>
  </div>
  <div class="mt-5">
    <div class="content"><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>很古早的时候我买了一台 树莓派 4B 4GB 版本（怀念当时 4GB 版本 500 块的日子）</p>
<p>由于 Cortex-A72 处理器，树莓派 4B 的性能其实很薄弱，当时我也只是勉强用它跑一跑 QQ 机器人和网站服务器。（宝塔跑 Mariadb 安装 CPU 占用率都能 100%）随后用旧电脑刷服务器后树莓派就闲置了。</p>
<p>最近有朋友想尝试在家里搭建个人网站，我就把树莓派借给了他，但是尝试了很多个 Linux 发行版（Debian、Ubuntu）后宝塔+LNMP 环境还是无法安装成功，不是宝塔无法运行就是 Mysql 无法安装。</p>
<p>在查阅了互联网资料后，发现我用的最多的 Centos 也存在 Arm 版本，在使用这个发行版后安装宝塔和 LNMP 环境也变得顺利了，于是打算写一篇博客记录一下安装过程</p>
<h1 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h1><p>需要准备：</p>
<ul>
<li>一台接入内网树莓派 4B</li>
<li>至少 16GB 的内存卡 + 读卡器 (USB3.0 最佳)</li>
<li>一台电脑</li>
<li>系统镜像</li>
<li>Raspberry Pi Imager (可前往 <a target="_blank" rel="noopener" href="//www.raspberrypi.com/software/">https://www.raspberrypi.com/software/</a> 下载)</li>
</ul>
<h1 id="烧录镜像"><a href="#烧录镜像" class="headerlink" title="烧录镜像"></a>烧录镜像</h1><p>其实 CentOS 7 为树莓派提供了专门的系统镜像，在<a target="_blank" rel="noopener" href="https://www.centos.org/download/">CentOS - Download</a>中给 Arm 架构的处理器提供了 <a target="_blank" rel="noopener" href="//isoredirect.centos.org/altarch/7/isos/aarch64/">ARM64(aarch64)</a> 和 <a target="_blank" rel="noopener" href="//isoredirect.centos.org/altarch/7/isos/armhfp/">ARM32(armhfp)</a> ，因为我的树莓派 4B 是 4GB 版本的，所以就选择了 ARM64 的版本</p>
<p>你可以在对应架构的下载界面中选择官方推荐的镜像下载地址，国内用户可以前往<a target="_blank" rel="noopener" href="http://mirror.nju.edu.cn/centos-altarch/7.9.2009/isos/aarch64/images">NJU Mirror</a>、<a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/centos-altarch/7.9.2009/isos/aarch64/images/">清华大学开源软件镜像站</a> 或 <a target="_blank" rel="noopener" href="https://mirrors.bfsu.edu.cn/centos-altarch/7.9.2009/isos/aarch64/images/">北京外国语大学开源软件镜像站</a> 下载</p>
<p>下载文件名带 <code>RaspberryPI</code> 的镜像</p>
<p>下载完毕后使用树莓派官方的烧录工具 Raspberry Pi Imager 烧录</p>
<p>插入读卡器，启动 Raspberry Pi Imager</p>
<p>选择操作系统-&gt;使用自定义镜像，选择刚才下载好的 CentOS 镜像，再选择要烧录的内存卡，点击<strong>烧录</strong>按钮即可开始烧录</p>
<blockquote>
<p>若内存卡中已烧录其它系统，请擦除一遍后在进行烧录</p>
<p><strong>注意 1</strong>：烧录后内存卡中原存储文件将<strong>永久</strong>丢失，请及时备份！</p>
<p><strong>注意 2</strong>：烧录无需使用 Imager 的高级设置，若设置永久设置请清空后烧录</p>
</blockquote>
<h1 id="配置系统"><a href="#配置系统" class="headerlink" title="配置系统"></a>配置系统</h1><p>等待烧录完成后即可取出内存卡插入树莓派内，插上电源与网线即可启动</p>
<p>使用 ssh 登录树莓派，默认用户名为<code>root</code>， 初始密码为<code>centos</code></p>
<blockquote>
<p>ssh 连接命令: <code>ssh 用户名@主机IP</code></p>
<p>登录后可使用<code>passwd</code>修改密码，请牢记修改后密码</p>
<p>若不清楚树莓派 IP 可进入路由器后台或使用<a target="_blank" rel="noopener" href="https://www.advanced-ip-scanner.com/">Advanced IP Scanner</a>扫描</p>
</blockquote>
<p>进入系统后输入<code>df -h</code>查看各分区大小</p>
<p>使用<code>rootfs-expand</code>拓展系统空间</p>
<blockquote>
<p><strong>警告</strong>：请务必拓展系统空间，否则可能导致空间过下使得宝塔安装失败</p>
</blockquote>
<p>新系统启动后推荐将软件源改为国内镜像，具体请参考镜像站帮助文档，如<a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/help/centos-altarch/">清华大学镜像站</a>可运行以下命令一键换源</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo sed -e &#x27;s|^mirrorlist=|#mirrorlist=|g&#x27; \</span><br><span class="line">         -e &#x27;s|^#baseurl=http://mirror.centos.org/altarch/|baseurl=https://mirrors.tuna.tsinghua.edu.cn/centos-altarch/|g&#x27; \</span><br><span class="line">         -e &#x27;s|^#baseurl=http://mirror.centos.org/$contentdir/|baseurl=https://mirrors.tuna.tsinghua.edu.cn/centos-altarch/|g&#x27; \</span><br><span class="line">         -i.bak \</span><br><span class="line">         /etc/yum.repos.d/CentOS-*.repo</span><br></pre></td></tr></table></figure>

<p>最后，更新软件包缓存 <code>sudo yum makecache</code></p>
<p>你也可以将系统语言设置为中文，设置方式如下：</p>
<ol>
<li>查看当前系统语言包 <code>locale</code></li>
<li>查看所有系统语言包 <code>locale -a</code></li>
<li>检查是否存在 <code>zh_CN</code> 开头的语言包</li>
<li>使用 <code>nano /etc/locale.conf</code> 编辑 <code>/etc/locale.conf</code> 文件，将其中的<strong>LANG</strong>值改为<code>zh_CN.UTF-8</code>（若第三步中未找到<code>zh_CN.UTF-8</code>，可用其他<code>zh_CN</code>开头的语言包替换）</li>
<li>使用<code>reboot</code>命令重启系统让修改生效</li>
</ol>
<blockquote>
<p>修改语言为中文后部分软件<strong>可能存在未知错误</strong>，若错误发生请按照第四步将<strong>LANG</strong>值改为<code>en_US.UTF-8</code></p>
</blockquote>
<h1 id="安装宝塔面板"><a href="#安装宝塔面板" class="headerlink" title="安装宝塔面板"></a>安装宝塔面板</h1><p>参考<a target="_blank" rel="noopener" href="https://www.bt.cn/new/download.html">宝塔官网-下载</a>使用 CentOS 安装脚本安装</p>
<p><code>yum install -y wget &amp;&amp; wget -O install.sh https://download.bt.cn/install/install_6.0.sh &amp;&amp; sh install.sh</code></p>
<blockquote>
<p>请删除命令末尾 9 位字符串后运行命令</p>
<p><strong>警告</strong>: 请在纯净环境中安装宝塔面板，若你先前已安装其他 LNMP&#x2F;LAMP 运行环境或先前宝塔面板安装失败请参考<strong>一、烧录镜像</strong>擦除内存卡并重新烧录系统后安装</p>
</blockquote>
<p>稍等一段时间后宝塔面板将安装完成</p>
<p><img src="/2023/raspberry-pi-install-centos/console.png" alt="BT-Install-Done"></p>
</div>
  </div>
</article>

<div id="paginator"></div>

        <footer class="container pt-3 mt-4 border-top">
          <div class="text-center pb-5 text-body-secondary">
            <small>
              Copyright © 2022 -
              <script>
                document.write(new Date().getFullYear());
              </script>
              Yurik all rights reserved. <br />
              <a href="https://hexo.io" target="_blank" rel="nofollow noopener"
                ><span>Hexo</span></a
              >
              ♥
              <span
                ><a
                  href="https://yurik.cafe"
                  target="_blank"
                  rel="nofollow noopener"
                  >NewsRoom</a
                >
                By
                <a
                  href="https://yurik.cafe"
                  target="_blank"
                  rel="nofollow noopener"
                  >Yurik</a
                ></span
              ><br />
            </small>

            <span id="running_times" >本站勉强运行: <span id="runDays">0</span>天<span id="runHours" >0</span >小时<span id="runMins">0</span>分<span id="runSeconds">0</span >秒 <script> function runtime() { X = new Date("2022/3/07 00:00:00"); Y = new Date(); T = Y.getTime() - X.getTime(); M = 24 * 60 * 60 * 1000; a = T / M; A = Math.floor(a); b = (a - A) * 24; B = Math.floor(b); c = (b - B) * 60; C = Math.floor((b - B) * 60); D = Math.floor((c - C) * 60);
document.getElementById("runDays").innerHTML = A; document.getElementById("runHours").innerHTML = B; document.getElementById("runMins").innerHTML = C; document.getElementById("runSeconds").innerHTML = D; } setInterval(runtime, 1000); </script> </span>
          </div>
        </footer>
      </div>
    </main>

     
    <script src="/js/navbar.js"></script>
    
    <script src="/js/bootstrap.bundle.min.js"></script>
     
  </body>
</html>
