

<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>
    将博客主页封面修改为随机图片 - 景蓝的小屋
  </title>
  
  
  <!-- stylesheets list from _config.yml -->
  
  <link rel="stylesheet" href="/css/bootstrap.min.css" />
  
  <link rel="stylesheet" href="/css/global.css" />
  
  <link rel="stylesheet" href="/css/newsroom.css" />
  
  
  
  <link rel="stylesheet" href="/css/post.css" />
  
                  
  <link rel="stylesheet" href="/css/links.css" />
  
                         <link rel="apple-touch-icon" sizes="76x76" href="https://unpkg.com/yurik-static@1.0.6/favicon/v2/apple-touch-icon.png"> <link rel="icon" href="https://unpkg.com/yurik-static@1.0.6/favicon/v2/favicon.ico">
<meta name="generator" content="Hexo 7.0.0"><link rel="alternate" href="/feed.xml" title="景蓝的小屋" type="application/rss+xml">
</head>

<body>
  <nav class="navbar navbar-expand-lg bg-body-tertiary fixed-top navbar-origin" style="backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px)" id="navbar" data-bs-theme="white">
    <div class="container">
      <a class="navbar-brand fw-bold" href="#">
        景蓝的小屋
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarCollapse">
        <ul class="navbar-nav me-auto mb-2 mb-md-0">
          
          <li class="nav-item">
            <a class="nav-link" aria-current="page" href="/">
              主页
            </a>
          </li>
          
          <li class="nav-item">
            <a class="nav-link" aria-current="page" href="/about">
              关于
            </a>
          </li>
          
          <li class="nav-item">
            <a class="nav-link" aria-current="page" href="/links">
              友情链接
            </a>
          </li>
          
        </ul>
      </div>
    </div>
  </nav>

  <main>
    <div id="content" class="container section-content py-5 mt-5">
      <article id="post" class="post">
  <div id="header">
    <div class="category" style="color: #6e6e73">
      <div class="content">
        <div class="category-eyebrow">
          <span>博文</span> ·
          <span>
            2023 年 09 月 12 日
          </span>
        </div>
      </div>
    </div>

    <div class="pagetitle">
      <div class="content">
        <h1 class="hero-headline" style="margin-top: 0.75rem !important">
          将博客主页封面修改为随机图片
        </h1>
      </div>
    </div>
  </div>
  <div class="mt-5">
    <div class="content"><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>Fluid 是一款很好用的 Hexo 主题，但他默认的主页封面并不能做到多张图片随机。于是我决定魔改他</p>
<h1 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h1><p>通过查看 <code>layout/index.ejs</code> 文件可以看出 index_img 的定义为<code>index_img = post.cover || theme.post.default_cover</code></p>
<p>我们只需要将 <code>theme.post.default_cover</code> 改为数字外加随机数取出就好了</p>
<p>而 ejs 支持 js 的 Math.random 语法，稍微学习 Javascript 就可以修改了</p>
<h1 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h1><p>进入 <code>主题文件夹/layout</code>，打开<code>index.ejs</code></p>
<p>搜索 <code>theme.post.default_cover</code></p>
<p>将其修改成 <code>theme.post.default_cover[Math.floor(Math.random() * (theme.post.default_cover.length))]</code></p>
<p>修改 Fluid 的配置文件 <strong>_config.fluid.yml</strong></p>
<p>将 <strong>default_index_img</strong> 配置项修改为这样</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">default_index_img:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">此处为图片链接</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">此处为图片链接</span></span><br></pre></td></tr></table></figure>

<p>重新部署就好啦！</p>
<h1 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h1><p>我同时也修改了 Fluid 的封面命名规则，这样子只需要设置一次封面属性就可以同时应用到 index_img 和 banner_img 啦</p>
<p><del>我也将修改后的主题改名为 Farbic 开源在 Github 仓库中 <strong>Rabbit-Clan&#x2F;hexo-theme-farbic</strong>，欢迎 Star + Fork</del></p>
<p><del>Farbic 主题还重新修改了部分页面的配置方式，使配置方式更加直观</del></p>
<p><del>只是还没来得及编写文档，可能安装后会出现无法使用的情况</del></p>
<p>2023.09.14 : 由于技术原因，暂时不单独提供修改的主题，您可以前往本博客仓库自行克隆后提取</p>
<p><strong>修改后的主题仍遵循 GPL 协议公开！</strong></p>
</div>
  </div>
</article>

<div id="paginator"></div>
      <footer class="container pt-3 mt-4 border-top">
        <div class="text-center pb-5 text-body-secondary">
          <small>
            Copyright ©
            <script>
              document.write(new Date().getFullYear());
            </script>
            景蓝Yurik all rights reserved. <br />
            <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a>
            ♥
            <span><a href="https://github.com/Newsroom-Dev/hexo-theme-newsroom" target="_blank" rel="nofollow noopener">Newsroom</a>
              By
              <a href="https://yurik.cafe" target="_blank" rel="nofollow noopener">Yurik</a></span><br />
          </small>

          <span id="running_times" >本站勉强运行: <span id="runDays">0</span>天<span id="runHours" >0</span >小时<span id="runMins">0</span>分<span id="runSeconds">0</span >秒 <script> function runtime() { X = new Date("2022/3/07 00:00:00"); Y = new Date(); T = Y.getTime() - X.getTime(); M = 24 * 60 * 60 * 1000; a = T / M; A = Math.floor(a); b = (a - A) * 24; B = Math.floor(b); c = (b - B) * 60; C = Math.floor((b - B) * 60); D = Math.floor((c - C) * 60);
document.getElementById("runDays").innerHTML = A; document.getElementById("runHours").innerHTML = B; document.getElementById("runMins").innerHTML = C; document.getElementById("runSeconds").innerHTML = D; } setInterval(runtime, 1000); </script> </span>
        </div>
      </footer>
    </div>
  </main>

   
  <script src="/js/navbar.js"></script>
  
  <script src="/js/bootstrap.bundle.min.js"></script>
  
  
</body>

</html>