

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/favicon/v2/apple-touch-icon.png">
  <link rel="icon" href="/favicon/v2/favicon.ico">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="景蓝Yurik">
  <meta name="keywords" content="景蓝,Yurik,Yurik&#39;s Blog,博客,祐柯,祐里柯,Lasambo,Yuri,拉萨姆博">
  
    <meta name="description" content="FRP隧道配置生成器              * {             box-sizing: border-box;             margin: 0;             padding: 0;             font-family: &#39;Segoe UI&#39;, Tahoma, Geneva, Verdana, sans-serif">
<meta property="og:type" content="website">
<meta property="og:title" content="page.title">
<meta property="og:url" content="https://yurik.cafe/genConfig.html">
<meta property="og:site_name" content="景蓝的小屋">
<meta property="og:description" content="FRP隧道配置生成器              * {             box-sizing: border-box;             margin: 0;             padding: 0;             font-family: &#39;Segoe UI&#39;, Tahoma, Geneva, Verdana, sans-serif">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-06-18T16:36:54.532Z">
<meta property="article:modified_time" content="2025-06-18T16:36:54.532Z">
<meta property="article:author" content="景蓝Yurik">
<meta property="article:tag" content="景蓝,Yurik,Yurik&#39;s Blog,博客,祐柯,祐里柯,Lasambo,Yuri,拉萨姆博">
<meta name="twitter:card" content="summary_large_image">
  
  
  
  <title>page.title - 景蓝的小屋</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />





<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  



  
<link rel="stylesheet" href="/assets/css/quote_card.css">
<link rel="stylesheet" href="https://at.alicdn.com/t/c/font_4230030_eflllpvnb2t.css">
<link rel="stylesheet" href="https://at.alicdn.com/t/c/font_1829688_v9ay97s4s0g.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"yurik.cafe","root":"/","version":"1.9.7","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/feed.xml" title="景蓝的小屋" type="application/rss+xml">
</head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 60vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>景蓝的小屋</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/" target="_self">
                <i class="iconfont icon-link-fill"></i>
                <span>友链</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="https://www.travellings.cn/go.html" target="_self">
                <i class="iconfont icon-subway"></i>
                <span>开往</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button"
                 data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="iconfont icon-books"></i>
                <span>子站</span>
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                
                  
                  
                  
                  <a class="dropdown-item" href="//wiki.yurik.cafe" target="_self">
                    
                    <span>Wiki@Yurik</span>
                  </a>
                
              </div>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="page.title"></span>
          
        </div>

        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
    <div class="container nopadding-x-md">
      <div id="board" >
        
        <div class="container">
          <div class="row">
            <div class="col-12 col-md-10 m-auto">
              

<article class="page-content">
  <!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FRP隧道配置生成器</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #2c3e50);
            color: #333;
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .container {
            width: 100%;
            max-width: 1100px;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            margin-top: 20px;
        }
        
        header {
            background: linear-gradient(90deg, #3498db, #2c3e50);
            color: white;
            padding: 25px 30px;
            text-align: center;
        }
        
        header h1 {
            font-size: 2.4rem;
            margin-bottom: 10px;
        }
        
        header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .content {
            display: flex;
            flex-wrap: wrap;
            padding: 0;
        }
        
        .form-section {
            flex: 1;
            min-width: 300px;
            padding: 30px;
            background-color: #f8f9fa;
            border-right: 1px solid #e9ecef;
        }
        
        .result-section {
            flex: 1;
            min-width: 300px;
            padding: 30px;
            display: flex;
            flex-direction: column;
        }
        
        .server-config {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            border: 1px solid #90caf9;
        }
        
        .server-config h2 {
            color: #1565c0;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .server-config h2::before {
            content: "⚙️";
        }
        
        .tunnel-container {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
            border: 1px solid #e9ecef;
            position: relative;
        }
        
        .tunnel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #3498db;
        }
        
        .tunnel-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #2c3e50;
        }
        
        .delete-tunnel {
            background-color: #e74c3c;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 8px 15px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            max-width: 70px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            position: relative;
            -webkit-appearance: none;
        }

        .delete-tunnel:hover {
            background-color: #c0392b;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        .delete-tunnel:active {
            transform: translateY(0);
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
        }
        
        .form-group {
            margin-bottom: 22px;
            position: relative;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #ced4da;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        input:focus, select:focus, textarea:focus {
            border-color: #3498db;
            outline: none;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }
        
        .radio-group {
            display: flex;
            gap: 20px;
            margin-top: 8px;
        }
        
        .radio-option {
            display: flex;
            align-items: center;
        }
        
        .radio-option input {
            width: auto;
            margin-right: 8px;
        }
        
        .btn-group {
            display: flex;
            gap: 15px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        button {
            color: white;
            border: none;
            padding: 14px 25px;
            font-size: 18px;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 150px;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 10px rgba(0, 0, 0, 0.15);
        }
        
        button:active {
            transform: translateY(0);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        #add-tunnel {
            background: linear-gradient(90deg, #9b59b6, #8e44ad);
        }
        
        #add-tunnel:hover {
            background: linear-gradient(90deg, #8e44ad, #7d3c98);
        }
        
        #generate-btn {
            background: linear-gradient(90deg, #3498db, #2980b9);
        }
        
        #generate-btn:hover {
            background: linear-gradient(90deg, #2980b9, #2573a7);
        }
        
        #import-btn {
            background: linear-gradient(90deg, #27ae60, #219653);
        }
        
        #import-btn:hover {
            background: linear-gradient(90deg, #219653, #1e8449);
        }
        
        .result-container {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        #config-output {
            flex: 1;
            width: 100%;
            min-height: 350px;
            padding: 18px;
            background-color: #2c3e50;
            color: #f1c40f;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 16px;
            line-height: 1.5;
            white-space: pre-wrap;
            overflow: auto;
            margin-bottom: 20px;
            border: 2px solid #1a2530;
        }
        
        .example-config {
            background-color: #e9f7fe;
            border-left: 4px solid #3498db;
            padding: 16px;
            border-radius: 4px;
            margin-top: 25px;
            font-size: 14px;
        }
        
        .example-config h3 {
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .example-config pre {
            background-color: #d6eaf8;
            padding: 12px;
            border-radius: 4px;
            overflow: auto;
            font-size: 13px;
        }
        
        .port-range {
            display: inline-block;
            background-color: #e74c3c;
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 12px;
            margin-left: 8px;
        }
        
        .validation-error {
            color: #e74c3c;
            font-size: 14px;
            margin-top: 5px;
            display: none;
        }
        
        .input-invalid {
            border-color: #e74c3c !important;
            background-color: #fff0f0;
        }
        
        .counter {
            position: absolute;
            right: 10px;
            top: 40px;
            background: #3498db;
            color: white;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
        }
        
        .info-tip {
            font-size: 14px;
            color: #7f8c8d;
            margin-top: 5px;
            display: block;
        }
        
        .import-section {
            background: #fff8e1;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid #ffd54f;
        }
        
        .import-section h3 {
            color: #e65100;
            margin-bottom: 15px;
        }
        
        @media (max-width: 768px) {
            .content {
                flex-direction: column;
            }
            
            .form-section {
                border-right: none;
                border-bottom: 1px solid #e9ecef;
            }
            
            .btn-group {
                flex-direction: column;
            }
            
            button {
                width: 100%;
                margin-bottom: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>FRP隧道配置生成器</h1>
            <p>创建、管理和还原FRP隧道配置</p>
        </header>
        
        <div class="content">
            <div class="form-section">
                <!-- FRPS服务器配置区域 -->
                <div class="server-config">
                    <h2>FRPS服务器配置</h2>
                    
                    <div class="form-group">
                        <label for="serverAddr">服务器地址</label>
                        <input type="text" id="serverAddr" value="127.0.0.1" placeholder="输入FRPS服务器公网IP或域名" required>
                        <span class="info-tip">示例: 123.45.67.89 或 frp.example.com</span>
                    </div>
                    
                    <div class="form-group">
                        <label for="serverPort">服务器端口</label>
                        <input type="number" id="serverPort" min="1" max="65535" value="7000" placeholder="输入FRPS服务器端口" required>
                        <span class="info-tip">默认端口7000，需与FRPS配置匹配</span>
                    </div>
                    
                    <div class="form-group">
                        <label for="serverToken">认证令牌 (Token) <span style="color:#7f8c8d;font-weight:normal">(可选)</span></label>
                        <input type="text" id="serverToken" placeholder="输入FRPS服务器认证令牌">
                        <span class="info-tip">需与FRPS配置中的token一致</span>
                    </div>
                </div>
                
                <!-- 配置文件导入区域 -->
                <div class="import-section">
                    <h3>配置文件导入</h3>
                    <div class="form-group">
                        <label for="import-config">粘贴配置文件内容</label>
                        <textarea id="import-config" rows="5" placeholder="在此粘贴完整的FRP配置文件内容..."></textarea>
                    </div>
                    <button id="import-btn">导入配置文件</button>
                </div>
                
                <h2>隧道配置信息</h2>
                <p style="margin: 15px 0 25px; color: #7f8c8d;">添加并配置多个隧道，生成统一配置文件</p>
                
                <div id="tunnels-container">
                    <div class="tunnel-container">
                        <div class="tunnel-header">
                            <div class="tunnel-title">隧道 #1</div>
                            <button class="delete-tunnel">删除</button>
                        </div>
                        <div class="form-group">
                            <label for="tunnelName1">隧道名称 <span class="counter">1</span></label>
                            <input type="text" id="tunnelName1" placeholder="输入隧道名称（如：ssh-tunnel）" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="localIP1">本地地址</label>
                            <input type="text" id="localIP1" value="127.0.0.1" placeholder="输入本地IP地址" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="localPort1">本地端口</label>
                            <input type="number" id="localPort1" min="1" max="65535" placeholder="输入本地端口号" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="remotePort1">远程端口 
                                <span class="port-range">范围: 36000-36999</span>
                            </label>
                            <input type="number" id="remotePort1" min="1" max="65535" placeholder="输入远程端口号" required>
                            <div class="validation-error">
                                远程端口必须在36000-36999范围内！
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>服务类型</label>
                            <div class="radio-group">
                                <div class="radio-option">
                                    <input type="radio" id="tcp1" name="serviceType1" value="tcp" checked>
                                    <label for="tcp1">TCP</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" id="udp1" name="serviceType1" value="udp">
                                    <label for="udp1">UDP</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="btn-group">
                    <button id="add-tunnel">+ 添加隧道</button>
                    <button id="generate-btn">生成配置文件</button>
                </div>
                
                <div class="example-config">
                    <h3>配置文件示例</h3>
                    <pre>[common]
serverAddr = "123.45.67.89"
serverPort = 7000
auth.token = "secure_token_123"

[[proxies]]
name = "ssh-tunnel"
type = "tcp"
localIP = "127.0.0.1"
localPort = 22
remotePort = 36022

[[proxies]]
name = "web-server"
type = "tcp"
localIP = "127.0.0.1"
localPort = 80
remotePort = 36080</pre>
                    <p>注意：远程端口必须在36000-36999范围内</p>
                </div>
            </div>
            
            <div class="result-section">
                <h2>生成的FRP配置文件</h2>
                <p style="margin: 15px 0 25px; color: #7f8c8d;">完整的FRP客户端配置将显示在下方</p>
                
                <div class="result-container">
                    <textarea id="config-output" readonly></textarea>
                </div>
            </div>
        </div>
        
        <footer>
            <p>FRP隧道配置生成器 &copy; 2025 | 支持配置生成与还原</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const tunnelsContainer = document.getElementById('tunnels-container');
            const addTunnelBtn = document.getElementById('add-tunnel');
            const generateBtn = document.getElementById('generate-btn');
            const importBtn = document.getElementById('import-btn');
            const configOutput = document.getElementById('config-output');
            const importConfigTextarea = document.getElementById('import-config');
            
            let tunnelCounter = 1;
            
            // 添加隧道
            addTunnelBtn.addEventListener('click', function() {
                tunnelCounter++;
                const newTunnel = document.createElement('div');
                newTunnel.className = 'tunnel-container';
                newTunnel.innerHTML = `
                    <div class="tunnel-header">
                        <div class="tunnel-title">隧道 #${tunnelCounter}</div>
                        <button class="delete-tunnel">删除</button>
                    </div>
                    <div class="form-group">
                        <label for="tunnelName${tunnelCounter}">隧道名称 <span class="counter">${tunnelCounter}</span></label>
                        <input type="text" id="tunnelName${tunnelCounter}" placeholder="输入隧道名称（如：ssh-tunnel）" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="localIP${tunnelCounter}">本地地址</label>
                        <input type="text" id="localIP${tunnelCounter}" value="127.0.0.1" placeholder="输入本地IP地址" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="localPort${tunnelCounter}">本地端口</label>
                        <input type="number" id="localPort${tunnelCounter}" min="1" max="65535" placeholder="输入本地端口号" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="remotePort${tunnelCounter}">远程端口 
                            <span class="port-range">范围: 36000-36999</span>
                        </label>
                        <input type="number" id="remotePort${tunnelCounter}" min="1" max="65535" placeholder="输入远程端口号" required>
                        <div class="validation-error">
                            远程端口必须在36000-36999范围内！
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>服务类型</label>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="tcp${tunnelCounter}" name="serviceType${tunnelCounter}" value="tcp" checked>
                                <label for="tcp${tunnelCounter}">TCP</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="udp${tunnelCounter}" name="serviceType${tunnelCounter}" value="udp">
                                <label for="udp${tunnelCounter}">UDP</label>
                            </div>
                        </div>
                    </div>
                `;
                
                tunnelsContainer.appendChild(newTunnel);
                
                // 添加删除事件
                const deleteBtn = newTunnel.querySelector('.delete-tunnel');
                deleteBtn.addEventListener('click', function() {
                    if (tunnelCounter > 1) {
                        tunnelsContainer.removeChild(newTunnel);
                        tunnelCounter--;
                    } else {
                        alert('至少需要保留一个隧道配置！');
                    }
                });
            });
            
            // 远程端口范围校验函数
            function validateRemotePort(port) {
                return port >= 36000 && port <= 36999;
            }
            
            // 生成配置文件
            generateBtn.addEventListener('click', function() {
                // 获取服务器配置信息
                const serverAddr = document.getElementById('serverAddr').value.trim();
                const serverPort = parseInt(document.getElementById('serverPort').value);
                const serverToken = document.getElementById('serverToken').value.trim();
                
                // 验证服务器配置
                if (!serverAddr || isNaN(serverPort)) {
                    alert('请填写完整的FRPS服务器配置！');
                    return;
                }
                
                if (serverPort < 1 || serverPort > 65535) {
                    alert('服务器端口必须在1-65535范围内！');
                    return;
                }
                
                // 开始生成配置
                let configContent = `[common]\n`;
                configContent += `serverAddr = "${serverAddr}"\n`;
                configContent += `serverPort = ${serverPort}\n`;
                
                // 添加token（如果存在）
                if (serverToken) {
                    configContent += `auth.token = "${serverToken}"\n`;
                }
                
                configContent += `\n`;
                
                let isValid = true;
                let tunnelNames = new Set();
                
                // 获取所有隧道容器
                const tunnelContainers = document.querySelectorAll('.tunnel-container');
                
                for (let i = 0; i < tunnelContainers.length; i++) {
                    const container = tunnelContainers[i];
                    const index = container.querySelector('.counter').textContent;
                    
                    // 获取表单值
                    const tunnelName = document.getElementById(`tunnelName${index}`).value.trim();
                    const localIP = document.getElementById(`localIP${index}`).value.trim();
                    const localPort = parseInt(document.getElementById(`localPort${index}`).value);
                    const remotePort = parseInt(document.getElementById(`remotePort${index}`).value);
                    const serviceType = document.querySelector(`input[name="serviceType${index}"]:checked`).value;
                    
                    // 检查隧道名称是否重复
                    if (tunnelNames.has(tunnelName)) {
                        alert(`隧道名称 "${tunnelName}" 已重复！请为每个隧道使用唯一的名称。`);
                        document.getElementById(`tunnelName${index}`).classList.add('input-invalid');
                        isValid = false;
                        break;
                    }
                    tunnelNames.add(tunnelName);
                    
                    // 验证输入
                    if (!tunnelName || !localIP || isNaN(localPort) || isNaN(remotePort)) {
                        alert(`隧道 #${index}：请填写所有必填字段！`);
                        isValid = false;
                        break;
                    }
                    
                    // 校验本地端口范围
                    if (localPort < 1 || localPort > 65535) {
                        alert(`隧道 #${index}：本地端口必须在1-65535范围内！`);
                        isValid = false;
                        break;
                    }
                    
                    // 校验远程端口范围
                    if (!validateRemotePort(remotePort)) {
                        container.querySelector(`#remotePort${index}`).classList.add('input-invalid');
                        container.querySelector('.validation-error').style.display = 'block';
                        alert(`隧道 #${index}：远程端口必须在36000-36999范围内！`);
                        isValid = false;
                        break;
                    }
                    
                    // 生成配置内容
                    configContent += `[[proxies]]\n`;
                    configContent += `name = "${tunnelName}"\n`;
                    configContent += `type = "${serviceType}"\n`;
                    configContent += `localIP = "${localIP}"\n`;
                    configContent += `localPort = ${localPort}\n`;
                    configContent += `remotePort = ${remotePort}\n\n`;
                }
                
                if (isValid && configContent) {
                    // 显示配置
                    configOutput.value = configContent;
                }
            });
            
            // 配置文件导入功能（修复版）
            importBtn.addEventListener('click', function() {
                const configText = importConfigTextarea.value.trim();
                
                if (!configText) {
                    alert('请粘贴配置文件内容！');
                    return;
                }
                
                try {
                    // 解析配置文件
                    const configData = parseConfig(configText);
                    
                    // 填充服务器配置
                    document.getElementById('serverAddr').value = configData.common.serverAddr || '127.0.0.1';
                    document.getElementById('serverPort').value = configData.common.serverPort || 7000;
                    document.getElementById('serverToken').value = configData.common.token || '';
                    
                    // 移除现有隧道配置
                    while (tunnelsContainer.children.length > 1) {
                        tunnelsContainer.removeChild(tunnelsContainer.lastChild);
                    }
                    tunnelCounter = 1;
                    
                    // 填充隧道配置
                    configData.proxies.forEach((proxy, index) => {
                        if (index > 0) {
                            // 添加新的隧道卡片
                            const addBtn = document.getElementById('add-tunnel');
                            addBtn.click();
                        }
                        
                        // 填充表单
                        document.getElementById(`tunnelName${index + 1}`).value = proxy.name;
                        document.getElementById(`localIP${index + 1}`).value = proxy.localIP;
                        document.getElementById(`localPort${index + 1}`).value = proxy.localPort;
                        document.getElementById(`remotePort${index + 1}`).value = proxy.remotePort;
                        
                        // 设置服务类型
                        const typeRadios = document.querySelectorAll(`input[name="serviceType${index + 1}"]`);
                        typeRadios.forEach(radio => {
                            if (radio.value === proxy.type.toLowerCase()) {
                                radio.checked = true;
                            }
                        });
                    });
                    
                    alert(`成功导入${configData.proxies.length}个隧道配置！`);
                    generateBtn.click();
                } catch (error) {
                    alert(`配置文件解析失败: ${error.message}\n\n错误详情: ${error.details || ''}`);
                }
            });
            
            // 配置文件解析函数（修复版）
            function parseConfig(configText) {
                const result = {
                    common: { serverAddr: "127.0.0.1", serverPort: 7000, token: "" },
                    proxies: []
                };
                
                const lines = configText.split('\n');
                let currentSection = null;
                let currentProxy = null;
                
                for (const line of lines) {
                    const trimmedLine = line.trim();
                    
                    // 跳过空行和注释
                    if (!trimmedLine || trimmedLine.startsWith('#')) continue;
                    
                    // 解析common段
                    if (trimmedLine.startsWith('[common]')) {
                        currentSection = 'common';
                        currentProxy = null;
                        continue;
                    }
                    
                    // 解析proxies段（支持 [[proxies]] 和 [proxies] 格式）
                    if (trimmedLine.startsWith('[[proxies]]') || trimmedLine.startsWith('[proxies]')) {
                        currentSection = 'proxies';
                        currentProxy = {};
                        result.proxies.push(currentProxy);
                        continue;
                    }
                    
                    // 解析键值对
                    const eqIndex = trimmedLine.indexOf('=');
                    if (eqIndex === -1) continue;
                    
                    const key = trimmedLine.substring(0, eqIndex).trim().toLowerCase();
                    let value = trimmedLine.substring(eqIndex + 1).trim();
                    
                    // 去除字符串的引号
                    if (value.startsWith('"') && value.endsWith('"')) {
                        value = value.substring(1, value.length - 1);
                    }
                    
                    // 处理common配置
                    if (currentSection === 'common') {
                        if (key === 'serveraddr') {
                            result.common.serverAddr = value;
                        } else if (key === 'serverport') {
                            result.common.serverPort = parseInt(value);
                        } else if (key === 'token' || key === 'auth.token') {
                            result.common.token = value;
                        }
                    }
                    
                    // 处理proxy配置
                    else if (currentSection === 'proxies' && currentProxy) {
                        if (key === 'name') {
                            currentProxy.name = value;
                        } else if (key === 'type') {
                            currentProxy.type = value.toLowerCase();
                        } else if (key === 'localip' || key === 'local_ip') {
                            currentProxy.localIP = value;
                        } else if (key === 'localport' || key === 'local_port') {
                            currentProxy.localPort = parseInt(value);
                        } else if (key === 'remoteport' || key === 'remote_port') {
                            currentProxy.remotePort = parseInt(value);
                        }
                    }
                }
                
                // 验证解析结果
                if (result.proxies.length === 0) {
                    throw new Error('没有找到隧道配置');
                }
                
                return result;
            }
            
            // 初始删除按钮事件
            document.querySelector('.delete-tunnel').addEventListener('click', function() {
                if (tunnelCounter > 1) {
                    tunnelsContainer.removeChild(document.querySelector('.tunnel-container'));
                    tunnelCounter--;
                } else {
                    alert('至少需要保留一个隧道配置！');
                }
            });
        });
    </script>
</body>
</html>

  

</article>


            </div>
          </div>
        </div>
      </div>
    </div>
    

    
    <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
      <i class="iconfont icon-arrowup" aria-hidden="true"></i>
    </a>
    

    
    <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
      Copyright © 2022 - 2024 Yurik all rights reserved.
<br \>

<a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a>
<i class="iconfont icon-love"></i>
<a href="https://github.com/imjinglan/hexo-theme-fluidee" target="_blank" rel="nofollow noopener"><span>FluidEE</span></a><br \>
<i class="iconfont icon-git"></i> Version: 3811fe1
<br \>
<a href="https://icp.gov.moe/?keyword=20244220" target="_blank">萌ICP备20244220号</a>
    </div>
  
  
  
    <!-- 备案信息 ICP for China -->
    <div class="beian">
  <span>
    <a href="http://beian.miit.gov.cn/" target="_blank" rel="nofollow noopener">
      桂ICP备2025057334号-1
    </a>
  </span>
  
    
      <span>
        <a
          href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=45020202000519"
          rel="nofollow noopener"
          class="beian-police"
          target="_blank"
        >
          
            <span style="visibility: hidden; width: 0">|</span>
            <img src="/img/beian.png" srcset="/img/loading.gif" lazyload alt="police-icon"/>
          
          <span>桂公网安备45020202000519号</span>
        </a>
      </span>
    
  
</div>

  
  
  
    <span id="running_times">本站勉强运行: <span id="runDays">0</span>天<span id="runHours">0</span>小时<span id="runMins">0</span>分<span id="runSeconds">0</span>秒</span>
      <script>
        function runtime() {
          X = new Date("2022/2/10 00:00:00");
          Y = new Date();
          T = (Y.getTime() - X.getTime());
          M = 24 * 60 * 60 * 1000;
          a = T / M;
          A = Math.floor(a);
          b = (a - A) * 24;
          B = Math.floor(b);
          c = (b - B) * 60;
          C = Math.floor((b - B) * 60);
          D = Math.floor((c - C) * 60);
  
          document.getElementById("runDays").innerHTML = A
          document.getElementById("runHours").innerHTML = B
          document.getElementById("runMins").innerHTML = C
          document.getElementById("runSeconds").innerHTML = D
        }
        setInterval(runtime, 1000);
      </script>
  
</div>
  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>

</html>